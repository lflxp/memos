import{u as f,r as c,j as e,I as a,g as N,a as k,b as p,c as S,d as g,D as z,U as C,e as L,f as H,N as D,h as E,O}from"./index-d6fbc60c.js";const U=()=>{const r=f().state.systemStatus.profile,[o,l]=c.useState({show:!1});return c.useEffect(()=>{const i=r.mode==="demo";l({show:i})},[]),o.show?e.jsx("div",{className:"z-10 flex flex-row items-center justify-center w-full py-2 text-sm sm:text-lg font-medium dark:text-gray-300 bg-white dark:bg-zinc-700 shadow",children:e.jsxs("div",{className:"w-full max-w-6xl px-4 flex flex-row justify-between items-center gap-x-3",children:[e.jsx("span",{children:"✨ A lightweight, self-hosted memo hub. Open Source and Free forever. ✨"}),e.jsxs("a",{className:"btn-primary shadow",href:"https://usememos.com/docs/install/docker",target:"_blank",children:["Install",e.jsx(a.ExternalLink,{className:"w-4 h-auto ml-1"})]})]})}):null},A={sm:640,md:768,lg:1024},R=()=>{const[s,r]=c.useState(0);return c.useEffect(()=>{N().then(o=>{r(o)})},[]),e.jsxs("a",{className:"h-7 flex flex-row justify-start items-center border dark:border-zinc-600 rounded cursor-pointer hover:opacity-80",href:"https://github.com/usememos/memos",target:"_blank",children:[e.jsxs("div",{className:"apply w-auto h-full px-2 flex flex-row justify-center items-center text-xs bg-gray-100 dark:bg-zinc-700",children:[e.jsx(a.Github,{className:"mr-1 w-4 h-4"}),"Star"]}),e.jsx("div",{className:"w-auto h-full flex flex-row justify-center items-center px-3 text-xs font-bold",children:s||""})]})},B=({destroy:s})=>{const r=p(),o=f(),l=o.state.systemStatus.profile,i=o.state.systemStatus.customizedProfile,t=()=>{s()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsxs("p",{className:"title-text flex items-center",children:[r("common.about")," ",i.name]}),e.jsx("button",{className:"btn close-btn",onClick:t,children:e.jsx(a.X,{})})]}),e.jsxs("div",{className:"flex flex-col justify-start items-start max-w-full w-96",children:[e.jsx("p",{className:"text-xs",children:r("about.memos-description")}),e.jsx("p",{className:"text-sm mt-2 ",children:i.description||r("about.no-server-description")}),e.jsxs("div",{className:"mt-4 w-full flex flex-row text-sm justify-start items-center",children:[e.jsxs("div",{className:"flex flex-row justify-start items-center mr-2",children:[r("about.powered-by"),e.jsxs("a",{href:"https://usememos.com",target:"_blank",className:"flex flex-row justify-start items-center mx-1 hover:underline",children:[e.jsx("img",{className:"w-6 h-auto rounded-full mr-1",src:"/logo.webp",alt:""}),"memos"]}),e.jsxs("span",{children:["v",l.version]})]}),e.jsx(R,{})]}),e.jsxs("div",{className:"border-t w-full mt-3 pt-2 text-sm flex flex-row justify-start items-center space-x-4",children:[e.jsxs("span",{className:"text-gray-500",children:[r("about.other-projects"),":"]}),e.jsxs("a",{href:"https://github.com/boojack/slash",target:"_blank",className:"flex items-center underline text-blue-600 hover:opacity-80",children:[e.jsx("img",{className:"w-4 h-auto mr-1",src:"https://github.com/boojack/slash/raw/main/resources/logo.png",alt:""}),e.jsx("span",{children:"Slash"})]}),e.jsxs("a",{href:"https://github.com/boojack/sticky-notes",target:"_blank",className:"flex items-center underline text-blue-600 hover:opacity-80",children:[e.jsx("img",{className:"w-4 h-auto mr-1",src:"https://raw.githubusercontent.com/boojack/sticky-notes/main/public/sticky-notes.ico",alt:""}),e.jsx("span",{children:"Sticky notes"})]})]})]})]})};function _(){k({className:"about-site-dialog",dialogName:"about-site-dialog"},B)}const F=()=>{const s=p(),r=S(),o=f(),l=g(),{systemStatus:i}=o.state,{user:t}=l.state,[d,u]=c.useState("Memos");c.useEffect(()=>{t&&u(t.nickname||t.username)},[t]);const m=()=>{r(`/u/${t==null?void 0:t.username}`)},x=()=>{_()},h=async()=>{await l.doSignOut(),window.location.href="/auth"};return e.jsx("div",{className:"flex flex-row justify-between items-center relative w-full h-auto px-2 flex-nowrap shrink-0",children:e.jsx(z,{className:"w-auto",trigger:e.jsxs("div",{className:"px-4 py-2 max-w-full flex flex-row justify-start items-center cursor-pointer rounded-lg hover:shadow hover:bg-white dark:hover:bg-zinc-700",children:[e.jsx(C,{className:"shadow",avatarUrl:t==null?void 0:t.avatarUrl}),e.jsx("span",{className:"px-1 text-lg font-medium text-slate-800 dark:text-gray-200 shrink truncate",children:t!=null?d:i.customizedProfile.name}),(t==null?void 0:t.role)==="HOST"?e.jsx("span",{className:"text-xs px-1 bg-blue-600 dark:bg-blue-800 rounded text-white dark:text-gray-200 shadow",children:"MOD"}):null]}),actionsClassName:"min-w-[128px] max-w-full",positionClassName:"top-full mt-2",actions:e.jsxs(e.Fragment,{children:[t!=null&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"w-full px-3 truncate text-left leading-10 cursor-pointer rounded flex flex-row justify-start items-center dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:m,children:[e.jsx(a.User,{className:"w-5 h-auto mr-2 opacity-80"})," ",s("common.profile")]}),e.jsxs("a",{className:"w-full px-3 truncate text-left leading-10 cursor-pointer rounded flex flex-row justify-start items-center dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-zinc-800",href:`/u/${t==null?void 0:t.id}/rss.xml`,target:"_blank",children:[e.jsx(a.Rss,{className:"w-5 h-auto mr-2 opacity-80"})," RSS"]})]}),e.jsxs("button",{className:"w-full px-3 truncate text-left leading-10 cursor-pointer rounded flex flex-row justify-start items-center dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:x,children:[e.jsx(a.Info,{className:"w-5 h-auto mr-2 opacity-80"})," ",s("common.about")]}),t!=null&&e.jsxs("button",{className:"w-full px-3 truncate text-left leading-10 cursor-pointer rounded flex flex-row justify-start items-center dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-zinc-800",onClick:h,children:[e.jsx(a.LogOut,{className:"w-5 h-auto mr-2 opacity-80"})," ",s("common.sign-out")]})]})})})},I=()=>{const s=p(),r=L(),o=g(),l=H(),i=l.state.showHeader,t=o.isVisitorMode()&&!o.state.user;c.useEffect(()=>{const n=()=>{window.innerWidth<A.sm?l.setHeaderStatus(!1):l.setHeaderStatus(!0)};window.addEventListener("resize",n),n()},[r]);const d={id:"header-home",path:"/",title:s("common.home"),icon:e.jsx(a.Home,{className:"mr-3 w-6 h-auto opacity-70"})},u={id:"header-daily-review",path:"/review",title:s("daily-review.title"),icon:e.jsx(a.Calendar,{className:"mr-3 w-6 h-auto opacity-70"})},m={id:"header-explore",path:"/explore",title:s("common.explore"),icon:e.jsx(a.Hash,{className:"mr-3 w-6 h-auto opacity-70"})},x={id:"header-resources",path:"/resources",title:s("common.resources"),icon:e.jsx(a.Paperclip,{className:"mr-3 w-6 h-auto opacity-70"})},h={id:"header-archived",path:"/archived",title:s("common.archived"),icon:e.jsx(a.Archive,{className:"mr-3 w-6 h-auto opacity-70"})},w={id:"header-setting",path:"/setting",title:s("common.settings"),icon:e.jsx(a.Settings,{className:"mr-3 w-6 h-auto opacity-70"})},j={id:"header-tool",path:"/tool",title:s("common.tool"),icon:e.jsx(a.Swords,{className:"mr-3 w-6 h-auto opacity-70"})},b={id:"header-auth",path:"/auth",title:s("common.sign-in"),icon:e.jsx(a.LogIn,{className:"mr-3 w-6 h-auto opacity-70"})},y=t?[m,b]:[d,u,m,x,h,j,w];return e.jsxs("div",{className:`fixed sm:sticky top-0 left-0 w-full sm:w-56 h-full shrink-0 pointer-events-none sm:pointer-events-auto z-10 ${i&&"pointer-events-auto"}`,children:[e.jsx("div",{className:`fixed top-0 left-0 w-full h-full bg-black opacity-0 pointer-events-none transition-opacity duration-300 sm:!hidden ${i&&"opacity-60 pointer-events-auto"}`,onClick:()=>l.setHeaderStatus(!1)}),e.jsxs("header",{className:`relative w-56 sm:w-full h-full max-h-screen overflow-auto hide-scrollbar flex flex-col justify-start items-start py-4 z-30 bg-zinc-100 dark:bg-zinc-800 sm:bg-transparent sm:shadow-none transition-all duration-300 -translate-x-full sm:translate-x-0 ${i&&"translate-x-0 shadow-2xl"}`,children:[e.jsx(F,{}),e.jsx("div",{className:"w-full px-2 py-2 flex flex-col justify-start items-start shrink-0 space-y-2",children:y.map(n=>e.jsx(D,{to:n.path,id:n.id,className:({isActive:v})=>E("px-4 pr-5 py-2 rounded-full border flex flex-row items-center text-lg text-gray-800 dark:text-gray-300 hover:bg-white hover:border-gray-200 dark:hover:border-zinc-600 dark:hover:bg-zinc-700",v?"bg-white dark:bg-zinc-700 border-gray-200 dark:border-zinc-600":"border-transparent"),children:e.jsxs(e.Fragment,{children:[n.icon," ",n.title]})},n.id))})]})]})};function $(){return e.jsxs("div",{className:"w-full min-h-full bg-zinc-100 dark:bg-zinc-800",children:[e.jsx("div",{className:"w-full h-auto flex flex-col justify-start items-center",children:e.jsx(U,{})}),e.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-row justify-center items-start sm:px-4",children:[e.jsx(I,{}),e.jsx("main",{className:"w-auto max-w-full flex-grow shrink flex flex-col justify-start items-start",children:e.jsx(O,{})})]})]})}export{$ as default};
